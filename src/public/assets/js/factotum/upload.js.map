{"version":3,"sources":["upload.js","utility.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upload.js","sourcesContent":["$(function() {\n\n\tDropzone.options.imageUpload = {\n\t\tsending: function(file, xhr, formData) {\n\t\t\tformData.append('_token', window.Laravel.csrfToken );\n\t\t}\n\t};\n\n\tvar previewTemplate = $('#dz_template').html();\n\n\tif ( $('.dropzone_cont').length > 0 ) {\n\t\t$('.dropzone_cont').each(function(index, item) {\n\n\t\t\tvar $item = $(item),\n\t\t\t\tmaxFiles = $item.data('max-files'),\n\t\t\t\tacceptedFiles = ( $item.data('accepted-files') == '*' ? null : $item.data('accepted-files') ),\n\t\t\t\tmockFile = undefined;\n\n\t\t\ttry {\n\t\t\t\tmockFile = eval( $item.data('mockfile') );\n\t\t\t} catch (ex) { }\n\n\t\t\t$item.dropzone({\n\t\t\t\turl: uploadMediaURL,\n\t\t\t\tparamName: 'media',\n\t\t\t\taddRemoveLinks: true,\n\t\t\t\tmaxFiles: maxFiles,\n\t\t\t\tacceptedFiles: acceptedFiles,\n\t\t\t\tthumbnailWidth: 400,\n\t\t\t\tthumbnailHeight: 400,\n\t\t\t\ttimeout: 180000,\n\t\t\t\tpreviewTemplate: previewTemplate,\n\t\t\t\tdictInvalidFileType: 'FILE TYPE NOT SUPPORTED',\n\t\t\t\tdictFileTooBig: 'MAXIMUM SIZE EXCEEDED',\n\t\t\t\tdictRemoveFileConfirmation: 'Are you sure you want to delete this content?',\n\t\t\t\tinit: function () {\n\n\t\t\t\t\tif ( typeof mockFile !== \"undefined\" ) {\n\t\t\t\t\t\tif (typeof mockFile.length !== \"undefined\") {\n\t\t\t\t\t\t\tfor (var i = 0; i < mockFile.length; i++) {\n\t\t\t\t\t\t\t\tthis.emit('addedfile', mockFile[i]);\n\t\t\t\t\t\t\t\tthis.emit('complete', mockFile[i]);\n\t\t\t\t\t\t\t\tthis.options.maxFiles = this.options.maxFiles - 1;\n\t\t\t\t\t\t\t\tthis.files.push(mockFile[i]);\n\n\t\t\t\t\t\t\t\tvar ext = mockFile[i].name.substr(-3);\n\t\t\t\t\t\t\t\t$(mockFile[i].previewElement).find('.dz-details').prepend(\n\t\t\t\t\t\t\t\t\t'<div class=\"dz-filetype file-' + ext + '\"></div>'\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tmockFile[i].previewElement.classList.add('dz-success');\n\t\t\t\t\t\t\t\tmockFile[i].previewElement.classList.add('dz-complete');\n\n\t\t\t\t\t\t\t\tif ( mockFile[i].type != 'image/jpeg' ) {\n\t\t\t\t\t\t\t\t\tmockFile[i].previewElement.classList.remove('dz-image-preview');\n\t\t\t\t\t\t\t\t\tmockFile[i].previewElement.classList.add('dz-file-preview');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.options.thumbnail.call(this, mockFile[i], mockFile[i].thumb);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.on('addedfile', function(file) {\n\t\t\t\t\t\tif (file.previewElement) {\n\t\t\t\t\t\t\tvar $dzCont = $(file.previewElement).closest('.dropzone_cont');\n\t\t\t\t\t\t\t$dzCont.find('.dz-filename').text(file.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.on('removedfile', function (file) {\n\t\t\t\t\t\tthis.options.maxFiles = this.options.maxFiles + 1;\n\t\t\t\t\t\t$('input[name=\"' + $item.data('fillable-hidden') + '\"]').val('');\n\t\t\t\t\t});\n\n\t\t\t\t},\n\n\t\t\t\tuploadprogress: function(file, progress, bytesSent) {\n\t\t\t\t\tif (file.previewElement) {\n\t\t\t\t\t\tvar progressElement = file.previewElement.querySelector('[data-dz-uploadprogress]');\n\t\t\t\t\t\tprogressElement.style.width = progress + '%';\n\t\t\t\t\t\tprogressElement.querySelector('.progress-text').textContent = parseInt(progress) + '%';\n\t\t\t\t\t\tif ( parseInt(progress) == 100 ) {\n\t\t\t\t\t\t\tprogressElement.querySelector('.progress-text').textContent = 'working...';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsending: function (file, xhr, formData) {\n\t\t\t\t\tformData.append( 'field_name', $($(this)[0].element).data('field_name') );\n\t\t\t\t\tformData.append( '_token', window.Laravel.csrfToken );\n\t\t\t\t},\n\n\t\t\t\tremovedfile: function(file) {\n\t\t\t\t\tvar $dzCont = $(file.previewElement).closest('.dropzone_cont');\n\t\t\t\t\t$dzCont.removeClass('dz-error');\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: deleteMediaURL + '/' + file.name,\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t_token: window.Laravel.csrfToken,\n\t\t\t\t\t\t\tfilename: file.name\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t\tif (data.result == 'ok') {\n\t\t\t\t\t\t\t\t$(file.previewElement).remove();\n\t\t\t\t\t\t\t\tif ( $item.data('max-files') == 0 ) {\n\t\t\t\t\t\t\t\t\t$item.attr('data-max-files', 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function() {\n\t\t\t\t\t\t\t$(file.previewElement).remove();\n\t\t\t\t\t\t\tif ( $item.data('max-files') == 0 ) {\n\t\t\t\t\t\t\t\t$item.attr('data-max-files', 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tcomplete: function (file) {\n\n\t\t\t\t\tif ( typeof file.xhr !== \"undefined\" ) {\n\t\t\t\t\t\tvar response = JSON.parse(file.xhr.response);\n\t\t\t\t\t\t_parseMedia( response.media, true, true );\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.getUploadingFiles().length === 0 && this.getQueuedFiles().length === 0) {\n\t\t\t\t\t\tshowListTab();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t},\n\n\t\t\t\terror: function error(file, message) {\n\t\t\t\t\tif (file.previewElement) {\n\t\t\t\t\t\tvar $dzCont = $(file.previewElement).closest('.dropzone_cont');\n\t\t\t\t\t\t$dzCont.addClass('dz-error');\n\t\t\t\t\t\tvar $preview = $(file.previewElement);\n\t\t\t\t\t\t$preview.addClass('dz-error');\n\n\t\t\t\t\t\tif (typeof message !== \"String\" && message.error) {\n\t\t\t\t\t\t\tmessage = message.error;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$preview.find('.dz-error-message').text(message);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\t}\n\n\t$('a[data-toggle=\"tab\"]').on('show.bs.tab', function (e) {\n\t\tif ( $(e.target).attr('href') == '#list' ) {\n\t\t\tloadMedia();\n\t\t}\n\t});\n\n\tfunction inputStatusChange() {\n\t\t$('.media_thumb').removeClass('checked');\n\n\t\t$('input').each(function(index, item) {\n\t\t\tif ( $(item).is(':checked') ) {\n\t\t\t\t$(item).closest('.media_thumb').addClass('checked');\n\t\t\t}\n\t\t});\n\n\t\tcheckInsertButton();\n\t}\n\n\t$( 'body' ).on('change', '#media_list_container input', function() {\n\t\tinputStatusChange();\n\t});\n\n\n\tfunction _parseMedia( mediaList, prepend, forceCheck ) {\n\t\tfor ( var i = 0; i < mediaList.length; i++ ) {\n\t\t\tvar media = mediaList[i];\n\n\t\t\tvar $m = $( template( 'single_media_template', {\n\t\t\t\tMEDIA_ID:          media.id,\n\t\t\t\tMEDIA_ICON:        media.icon,\n\t\t\t\tMEDIA_FILENAME:    media.filename,\n\t\t\t\tMEDIA_SIZE:        media.size,\n\t\t\t\tMEDIA_LAST_UPLOAD: media.last_upload,\n\t\t\t\tMEDIA_URL:         media.url\n\t\t\t}) );\n\n\t\t\tif ( media.thumb ) {\n\t\t\t\t$m.find('#media_thumb_' + media.id).attr('src', media.thumb);\n\t\t\t} else {\n\t\t\t\t$m.find('#media_thumb_' + media.id).remove();\n\t\t\t\t$m.find('.icon_container').removeClass('hidden');\n\t\t\t}\n\n\n\t\t\tif ( forceCheck ) {\n\t\t\t\t$m.find('input').prop('checked', 'checked');\n\t\t\t}\n\n\t\t\tif ( prepend ) {\n\t\t\t\t$('#media_list_container').prepend($m);\n\t\t\t} else {\n\t\t\t\t$('#media_list_container').append($m);\n\t\t\t}\n\t\t}\n\n\t\tif ( forceCheck ) {\n\t\t\tinputStatusChange();\n\t\t}\n\t}\n\n\t// LOAD ON LIST\n\tvar load = false;\n\tfunction loadMedia() {\n\t\tif ( !load ) {\n\t\t\tload = true;\n\t\t\t$.ajax({\n\t\t\t\turl: getMediaPaginatedURL,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {\n\t\t\t\t\t_token: window.Laravel.csrfToken,\n\t\t\t\t\toffset: mediaOffset,\n\t\t\t\t\tfield_name: fieldName\n\t\t\t\t},\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\tif (data.length > 0 ) {\n\t\t\t\t\t\tload = false;\n\n\t\t\t\t\t\t_parseMedia( data );\n\n\t\t\t\t\t\tmediaOffset += data.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction showListTab() {\n\t\t$('.upload_wrapper a[href=\"#media_list\"]').tab('show');\n\t}\n\n\tfunction checkInsertButton() {\n\t\tvar checked = 0;\n\t\t$('input[name=\"selected_images[]\"]').each(function() {\n\t\t\tif ( $(this).is(':checked') ) {\n\t\t\t\tchecked++;\n\t\t\t}\n\t\t});\n\t\tif ( checked > 0 ) {\n\t\t\t$('#set_media').removeAttr('disabled');\n\t\t} else {\n\t\t\t$('#set_media').attr('disabled', 'disabled');\n\t\t}\n\t}\n\n\tfunction getValues() {\n\t\tvar values = [];\n\t\t$('input[name=\"selected_images[]\"]').each(function() {\n\t\t\tif ( $(this).is(':checked') ) {\n\t\t\t\tvalues.push({\n\t\t\t\t\tid:          $(this).val(),\n\t\t\t\t\tthumb:       $(this).closest('.media_thumb').find('img').attr('src'),\n\t\t\t\t\ticon:        $(this).closest('.media_thumb').find('.icon_container span').attr('class'),\n\t\t\t\t\tfilename:    $(this).closest('.media_thumb').data('filename'),\n\t\t\t\t\tsize:        $(this).closest('.media_thumb').data('size'),\n\t\t\t\t\tlast_upload: $(this).closest('.media_thumb').data('last_upload'),\n\t\t\t\t\turl:         $(this).closest('.media_thumb').data('url'),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn values;\n\t}\n\n\t$('#set_media').on('click', function(e) {\n\t\te.preventDefault();\n\n\t\tif ( parent ) {\n\t\t\tvar fN = $(this).data('field_name');\n\t\t\tparent.setMediaFieldValue( fN, getValues() );\n\t\t}\n\t});\n\n\tif ( $('#media_list_container').length > 0 ) {\n\t\tcheckInsertButton();\n\n\t\t$(window).on('scroll', function() {\n\t\t\tloadMedia();\n\t\t});\n\t}\n\n});","\n$(function() {\n\n\t$('#menu_bars').on('click', function() {\n\t    if ($(this).hasClass('active')) {\n\t        $('.admin-menu').removeClass('slide-in');\n\t        $(this).removeClass('active');\n\t        $('body').removeClass('no_scroll');\n\t        // enableScroll();\n\t    } else {\n\t        // disableScroll();\n\t        $('.admin-menu').addClass('slide-in');\n\t        $(this).addClass('active');\n\t        $('body').addClass('no_scroll');\n\t    }\n\t});\n\n\t$('.open-submenu').on('click', function(){\n\t\t$(this).parent().toggleClass('open');\n\t\t$('.dropstatus', this).toggleClass('fa-caret-down').toggleClass('fa-caret-up');\n\t});\n\n\t$('.nav-language').on('click', function(){\n\t\t$(this).parent().toggleClass('open');\n\t\t$('.nav-language + .open-submenu .dropstatus').toggleClass('fa-caret-down').toggleClass('fa-caret-up');\n\t});\n\n\t$('[data-toggle=\"confirmation\"]').confirmation({\n\t\trootSelector: '[data-toggle=confirmation]',\n\t\tbtnOkIcon: 'fa fa-check',\n\t\tbtnCancelIcon: 'fa fa-times'\n\t});\n\n});\n\nfunction template( templateid, data ){\n\treturn document.getElementById( templateid ).innerHTML\n\t\t.replace(\n\t\t\t/%(\\w*)%/g, // or /{(\\w*)}/g for \"{this} instead of %this%\"\n\t\t\tfunction( m, key ){\n\t\t\t\treturn data.hasOwnProperty( key ) ? data[ key ] : \"\";\n\t\t\t}\n\t\t);\n}"]}